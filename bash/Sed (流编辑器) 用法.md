
# Sed (Stream Editor) 核心用法总结

## 基础语法
```bash
sed [选项] '地址 命令/查找/替换/标志' 文件名
````

## 常用选项 (Options)

|**选项**|**描述**|
|---|---|
|**`-n`**|**静默模式**。默认不输出，只输出被 `p` (打印) 命令显式处理的行。|
|**`-i`**|**直接修改文件** (In-place)。用于修改原始文件内容。|
|**`-r`**|**扩展正则表达式** (Extended Regex)。使 `+`, `?`, `|

## 核心命令 (Commands)

### 1. 替换 (Substitute - `s`)

这是最常用的功能。

**格式:** `[地址] s/查找内容/替换内容/标志`

|**标志**|**描述**|**示例**|
|---|---|---|
|`g`|**全局替换**。替换一行中所有匹配项。|`s/old/new/g`|
|`p`|打印发生替换的那一行（常与 `-n` 配合）。|`s/old/new/p`|
|`i`|忽略大小写。|`s/old/new/gi`|
|`&`|在替换内容中代表“查找内容”匹配到的字符串。|`s/(.*)/&.log/`|

### 2. 删除 (Delete - `d`)

**格式:** `[地址] d`

|**示例**|**描述**|
|---|---|
|`3d`|删除文件中的第 3 行。|
|`1,5d`|删除第 1 到第 5 行。|
|`/^#/d`|删除所有以 `#` 开头的注释行。|
|`/^$/d`|删除所有空行。|

### 3. 打印 (Print - `p`)

**格式:** `[地址] p` (必须配合 `-n` 使用)

|**示例**|**描述**|
|---|---|
|`3p`|只打印第 3 行。|
|`/error/p`|只打印所有包含 "error" 字符串的行。|

## 地址定位 (Addressing)

地址用于指定命令作用的行范围。

|**格式**|**描述**|**示例**|
|---|---|---|
|`N`|单个行号。|`5p`|
|`N,M`|行号范围。|`2,7d`|
|`/pattern/`|匹配正则表达式的行。|`/START/,/END/p`|
|`N,/pattern/`|从行号 N 开始，直到第一次匹配到 pattern 的行。|`10,/EOF/d`|

## 可直接复制的常用 Shell 示例


```Bash

# 替换：将文件中所有 "unix" 替换为 "linux"，并直接修改原文件
sed -i 's/unix/linux/g' file.txt 

# 删除：删除文件中的第 10 到 20 行
sed '10,20d' file.txt 

# 删除：删除所有空行 (行首^到行尾$之间没有字符)
sed '/^$/d' file.txt 

# 打印：只显示包含 "Config" 的行
sed -n '/Config/p' file.txt 

# 插入：在第 5 行之前插入新行 "---START---"
sed '5i ---START---' file.txt
```